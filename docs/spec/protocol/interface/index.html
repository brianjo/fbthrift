<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-spec/protocol/interface/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Interface Protocols | Facebook Thrift</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.internalfb.com/docs/spec/protocol/interface/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Interface Protocols | Facebook Thrift"><meta data-rh="true" name="description" content="This document describes the layer immediately preceding the transport protocol (eg. Rocket). This layer specifies how the request/response data must be serialized and formatted before being wrapped in the underlying transport protocol layer&#x27;s message format."><meta data-rh="true" property="og:description" content="This document describes the layer immediately preceding the transport protocol (eg. Rocket). This layer specifies how the request/response data must be serialized and formatted before being wrapped in the underlying transport protocol layer&#x27;s message format."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.internalfb.com/docs/spec/protocol/interface/"><link data-rh="true" rel="alternate" href="https://www.internalfb.com/docs/spec/protocol/interface/" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.internalfb.com/docs/spec/protocol/interface/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.afc07cdd.css">
<link rel="preload" href="/assets/js/runtime~main.1abcbc59.js" as="script">
<link rel="preload" href="/assets/js/main.b3203846.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Facebook Thrift Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Facebook Thrift Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Facebook Thrift</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/fbthrift" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/spec/">Specification</a><button aria-label="Toggle the collapsible sidebar category &#x27;Specification&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/about">Specification Format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/conformance/">Conformance</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/spec/definition/">Definitions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Definitions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/idl">Interface Definition Language (IDL)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/spec/protocol/">Protocols</a><button aria-label="Toggle the collapsible sidebar category &#x27;Protocols&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/protocol/channel">Channels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/protocol/data">Data Protocols</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/docs/spec/protocol/interface/">Interface Protocols</a><button aria-label="Toggle the collapsible sidebar category &#x27;Interface Protocols&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/protocol/interface/rocket">Rocket Protocol</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/guide/">User Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/experimental/">Experimental Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;Experimental Features&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/beta/">Beta Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;Beta Features&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/cpp/">C++</a><button aria-label="Toggle the collapsible sidebar category &#x27;C++&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/internals/">Internals</a><button aria-label="Toggle the collapsible sidebar category &#x27;Internals&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/references/">References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/releases">Releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contribution-guide">Contribution Guide</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Interface Protocols</h1><p>This document describes the layer immediately preceding the transport protocol (eg. <a href="/docs/spec/protocol/interface/rocket">Rocket</a>). This layer specifies how the request/response data must be serialized and formatted before being wrapped in the underlying transport protocol layer&#x27;s message format.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="request">Request<a class="hash-link" href="#request" title="Direct link to heading">​</a></h2><p>The client <strong>must</strong> take the user provided arguments to the Interface method and serialize the request as described in Serialization Details below. The client <strong>may</strong> compress the serialized request as described in <a href="#request-compression">Request Compression</a>. The name of the Interface method being requested as well as the <a href="/docs/spec/protocol/data">data protocol</a> that was used to serialize the request <strong>must</strong> be included in the metadata associated with the request. The client may detect an exception while attempting to perform the request before a valid response is received from the server, in which case, it <strong>must</strong> be raised as a <a href="#client-detected-exceptions">Client Detected Exception</a>.</p><p>The client <strong>must</strong> specify the method name in the request as follows:</p><ul><li>For methods inside an interaction, the method name is <code>‹InteractionName›.‹MethodName›</code> where <code>‹InteractionName›</code> and <code>‹MethodName›</code> are the names in the IDL of the interaction and method respectively.</li><li>For all other methods (including factory methods for interactions), the method name matches the name in the IDL.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="serialization-details">Serialization Details<a class="hash-link" href="#serialization-details" title="Direct link to heading">​</a></h3><p>The parameters to an Interface method <strong>must</strong> be treated as fields of a Thrift struct with an empty name (<code>&quot;&quot;</code>). The Field IDs <strong>must</strong> be the same as those specified in the IDL. If the Interface method has no parameters then the struct <strong>must</strong> have no fields. To prepare for sending the request through one of the underlying transport protocols, this unnamed struct <strong>must</strong> be serialized with one of Thrift’s <a href="/docs/spec/protocol/data">data protocols</a>.</p><p>For example, this method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">i32 foo(1: i32 a, 2: string b)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>might be called with these fields set in the metadata:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  protocol = ProtocolId.COMPACT;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name = &quot;foo&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  kind = RpcKind.SINGLE_REQUEST_SINGLE_RESPONSE;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  compression = CompressionAlgorithm.ZSTD;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>in which case it will have as its serialized request the result of placing the arguments in a</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">struct ‹Anonymous› {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  1: i32 a;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  2: string b;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>passing the <code>‹Anonymous›</code> to a serializer for the <a href="/docs/spec/protocol/data#compact-protocol">Compact Protocol</a> and passing the resulting string to a compressor for <a href="https://facebook.github.io/zstd/" target="_blank" rel="noopener noreferrer">zstd</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="response">Response<a class="hash-link" href="#response" title="Direct link to heading">​</a></h2><p>A response may be one of the following types:</p><ul><li>Declared response - responses that actually represent the response type of an Interface declared in the IDL. For example, the return type of a request-response method or the payload type of a stream.</li><li>Declared exception</li><li>Undeclared exception</li><li>Any exception</li><li>Internal server error</li></ul><p>The server <strong>must</strong> serialize the response depending on the response type as described below. If the response is a declared response, declared exception, or undeclared exception, the server <strong>should</strong> compress the serialized response as described in <a href="#response-compression">Response Compression</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="declared-response-and-declared-exception">Declared Response and Declared Exception<a class="hash-link" href="#declared-response-and-declared-exception" title="Direct link to heading">​</a></h3><p>The Thrift struct used to represent declared responses and <a href="/docs/spec/definition/exception#exceptions">declared exceptions</a> <strong>must</strong> be a union with an empty name (<code>&quot;&quot;</code>). The first field in the union with Field ID of <code>0</code> <strong>must</strong> be for the declared response. If the declared response type is <code>void</code> then the field for the declared response <strong>must</strong> be skipped. The Thrift struct <strong>must</strong> also have a field for each declared exception for that Interface with Field IDs matching those specified in the IDL. The correct field <strong>must</strong> be filled in by the server and then serialized using one of Thrift’s data protocols.</p><p>For example, this method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">i32 foo(1: i32 a, 2: string b) throws (1: MyException e1, 2: OtherException e2);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>would use the following union as its response struct:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">union &lt;Anonymous&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  0: i32 response;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  1: MyException e1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  2: OtherException e2;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the response is a declared response, the response metadata <strong>must</strong> indicate that it is a declared response.</p><p>If the response is a declared exception, the response metadata <strong>must</strong> indicate that it is a declared exception and it <strong>should</strong> contain a <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/thrift/RpcMetadata.thrift#ErrorClassification" target="_blank" rel="noopener noreferrer"><code>ErrorClassification</code></a> struct.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="undeclared-exception">Undeclared Exception<a class="hash-link" href="#undeclared-exception" title="Direct link to heading">​</a></h3><p><a href="/docs/spec/definition/exception#exceptions">Undeclared exceptions</a> <strong>must</strong> be sent through the response metadata and the metadata <strong>must</strong> indicate that the response is an undeclared exception and <strong>must</strong> contain the exception name and the message.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="any-exception">Any Exception<a class="hash-link" href="#any-exception" title="Direct link to heading">​</a></h3><p>The response may also be an Any exception. This is an exception that is serialized using one of Thrift&#x27;s data protocols and stored in a <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/thrift/any_rep.thrift#SemiAnyStruct" target="_blank" rel="noopener noreferrer"><code>SemiAnyStruct</code></a>. This <code>SemiAnyStruct</code> then must be serialized using one of Thrift&#x27;s data protocols. If the protocol used to serialize the exception and the protocol used to serialize the <code>SemiAnyStruct</code> do not match, the <code>protocol</code> field in the <code>SemiAnyStruct</code> <strong>must</strong> be the data protocol that was used to serialize the exception. The response metadata <strong>must</strong> indicate that the response is an Any exception.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="internal-server-error">Internal Server Error<a class="hash-link" href="#internal-server-error" title="Direct link to heading">​</a></h3><p>In addition to responses from the server handler, the server can also decide to reject a request for a variety of reasons, for example, load-shedding, invalid request, etc. In this case the server <strong>should</strong> send an exception containing one of the pre-defined error codes <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/cpp2/async/ResponseChannel.cpp" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interfaces">Interfaces<a class="hash-link" href="#interfaces" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-response">Request-Response<a class="hash-link" href="#request-response" title="Direct link to heading">​</a></h3><p>To initiate a request-response, the client <strong>must</strong> make a request for a request-response method defined in the IDL. The request <strong>must</strong> follow the format defined in <a href="#request">Request</a>. After sending the request, the client <strong>should</strong> wait for a response from the server or throw a <a href="#client-detected-exceptions">Client Detected Exception</a>.</p><p>The server <strong>must</strong> execute the server handler for the requested method or reject the request with an <a href="#internal-server-error">internal server error</a>. Once the server handler finishes executing or throws an exception, the response <strong>must</strong> be sent using the format defined in <a href="#response">Response</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stream">Stream<a class="hash-link" href="#stream" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-request">Stream Request<a class="hash-link" href="#stream-request" title="Direct link to heading">​</a></h4><p>To initiate a stream, the client <strong>must</strong> make a request for a stream method defined in the IDL. The request <strong>must</strong> follow the format defined in <a href="#request">Request</a>. After sending the request, the client <strong>should</strong> wait for a response from the server or throw a <a href="#client-detected-exceptions">Client Detected Exception</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-initial-response">Stream Initial Response<a class="hash-link" href="#stream-initial-response" title="Direct link to heading">​</a></h4><p>The server <strong>must</strong> execute the server handler for the stream method or reject the request with an <a href="#internal-server-error">internal server error</a>. If the server handler finishes executing successfully, the server <strong>must</strong> send an initial response to the client containing the initial response type specified in the IDL (assumed to be <code>void</code> if no initial response type is specified). This initial response <strong>must</strong> be formatted as specified in <a href="#response">Response</a> and will establish the stream.</p><p>If the request was rejected with an <a href="#internal-server-error">internal server error</a> or the server handler threw an exception (declared or undeclared) the stream <strong>must not</strong> be established and the error <strong>must</strong> be sent to the client using the format specified in <a href="#response">Response</a>. In this case, the server <strong>must not</strong> send any stream payloads to the client.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-payloads">Stream Payloads<a class="hash-link" href="#stream-payloads" title="Direct link to heading">​</a></h4><p>Once the initial response is sent and the server has credits, the server <strong>should</strong> start sending stream payloads to the client. The stream payloads <strong>must</strong> be an actual payload, a declared exception, or an undeclared exception and they follow the format of these response types as defined in <a href="#response">Response</a>.</p><p>If the server sends a declared exception or an undeclared exception to the client, it acts as the termination of the stream and the server <strong>must not</strong> send any more payloads to the client.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-cancellation">Stream Cancellation<a class="hash-link" href="#stream-cancellation" title="Direct link to heading">​</a></h4><p>The client <strong>may</strong> send a cancellation signal to the server at any point after the stream is established. If the server receives a cancellation, it <strong>should</strong> stop sending stream payloads to the client.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-completion">Stream Completion<a class="hash-link" href="#stream-completion" title="Direct link to heading">​</a></h4><p>If the stream was established, the server <strong>must</strong> send a completion signal to the client once it is done sending all stream payloads to the client. The completion signal acts as a termination of the stream and the server <strong>must not</strong> send any payloads to the client after it has sent the completion signal.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-flow-control">Stream Flow Control<a class="hash-link" href="#stream-flow-control" title="Direct link to heading">​</a></h4><p>Thrift streaming <strong>must</strong> be flow-controlled using a credit mechanism. The client <strong>must</strong> give the server an initial set of credits that the server can use to send stream payloads. Each stream payload <strong>must</strong> consume one credit on the server. The server <strong>must not</strong> send any payloads if it has no credits until it receives more from the client.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-expire-time">Stream Expire Time<a class="hash-link" href="#stream-expire-time" title="Direct link to heading">​</a></h4><p>The server <strong>may</strong> specify a stream expire time which is the time the server <strong>should</strong> wait after exhausting all of its credits to receive more credits from the client. If the server doesn’t receive any credits after the stream expire time has elapsed, the server <strong>should</strong> terminate the stream with an <a href="#internal-server-error">internal server error</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-chunk-timeout">Stream Chunk Timeout<a class="hash-link" href="#stream-chunk-timeout" title="Direct link to heading">​</a></h4><p>The client <strong>may</strong> specify a chunk timeout which is the time the client <strong>should</strong> wait for receiving a new stream payload from the server. If the client doesn’t receive a payload from the server for longer than the chunk timeout, it <strong>should</strong> cancel the stream and raise a <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/cpp/transport/TTransportException.h" target="_blank" rel="noopener noreferrer"><code>TTransportException</code></a> with the type <code>TIMEOUT</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sink">Sink<a class="hash-link" href="#sink" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sink-request">Sink Request<a class="hash-link" href="#sink-request" title="Direct link to heading">​</a></h4><p>To initiate a sink, the client <strong>must</strong> make a request for a sink method defined in the IDL. The request <strong>must</strong> follow the format defined in <a href="#request">Request</a>. After sending the request, the client <strong>should</strong> wait for a response from the server or throw a <a href="#client-detected-exceptions">Client Detected Exception</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sink-initial-response">Sink Initial Response<a class="hash-link" href="#sink-initial-response" title="Direct link to heading">​</a></h4><p>The server <strong>must</strong> execute the server handler for the sink method or reject the request with an <a href="#internal-server-error">internal server error</a>. If the server handler finishes executing successfully, the server <strong>must</strong> send an initial response to the client containing the initial response type specified in the IDL (assumed to be <code>void</code> if no initial response type is specified). This initial response <strong>must</strong> be formatted as specified in <a href="#response">Response</a> and will establish the sink.</p><p>If the request was rejected with an <a href="#internal-server-error">internal server error</a> or the server handler threw an exception (declared or undeclared) the sink <strong>must not</strong> be established and the error <strong>must</strong> be sent to the client using the format specified in #Response. In this case, the client <strong>must not</strong> send any sink payloads to the server and the server <strong>must not</strong> send a final response to the client.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sink-payloads">Sink Payloads<a class="hash-link" href="#sink-payloads" title="Direct link to heading">​</a></h4><p>Once the initial response is received and the client has received an initial set of credits from the server, the client <strong>should</strong> start sending sink payloads to the server. The sink payloads <strong>must</strong> be an actual payload, a declared exception, or an undeclared exception and they follow the serialization format of these response types as defined in <a href="#response">Response</a>.</p><p>If the client sends a declared exception or an undeclared exception to the server, it <strong>must not</strong> send any more payloads to the server. The server <strong>may</strong> still respond with a final response.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sink-completion">Sink Completion<a class="hash-link" href="#sink-completion" title="Direct link to heading">​</a></h4><p>If the sink was established, the client <strong>must</strong> send a completion signal to the server once it is done sending all sink payloads to the server. The client <strong>must not</strong> send any payloads to the server after it has sent the completion signal.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sink-final-response">Sink Final Response<a class="hash-link" href="#sink-final-response" title="Direct link to heading">​</a></h4><p>If the sink was established, the server <strong>must</strong> send a final response to the client. The final response acts as a termination of the sink. The final response <strong>may</strong> be any one of the response types mentioned in <a href="#response">Response</a>. The server <strong>may</strong> send this final response before it receives the completion signal from the client.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sink-flow-control">Sink Flow Control<a class="hash-link" href="#sink-flow-control" title="Direct link to heading">​</a></h4><p>Thrift sinks <strong>must</strong> be flow-controlled using a credit mechanism. The server <strong>must</strong> send the client an initial set of credits after it receives a sink request. Each sink payload <strong>must</strong> consume one credit on the client. The client <strong>must not</strong> send any payloads if it has no credits until it receives more from the server.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sink-chunk-timeout">Sink Chunk Timeout<a class="hash-link" href="#sink-chunk-timeout" title="Direct link to heading">​</a></h4><p>The server <strong>may</strong> specify a chunk timeout which is the time the server <strong>should</strong> wait for receiving a new sink payload from the client. If the server doesn’t receive a payload from the client for longer than the chunk timeout, it <strong>should</strong> terminate the sink by sending an <a href="#internal-server-error">internal server error</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interactions">Interactions<a class="hash-link" href="#interactions" title="Direct link to heading">​</a></h3><p>Requests that are part of the interaction <strong>must</strong> be sent over the same connection to the server. Each interaction <strong>must</strong> have an ID that is unique to the connection. The server <strong>must</strong> maintain the state that is associated with each interaction so that subsequent requests can use that state.</p><p>All requests in an interaction, including the factory function if used, <strong>must</strong> reach the server in the order they are sent by the client. The server <strong>may</strong> begin processing subsequent requests before the earlier ones complete, provided they are started in order.</p><p>The RPC contracts of member requests are otherwise handled the same as if the requests were not in an interaction. A single interaction <strong>may</strong> include multiple streams/sinks, and these are flow-controlled independently.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creation">Creation<a class="hash-link" href="#creation" title="Direct link to heading">​</a></h4><p>Interactions can be created in two different ways as described below.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="factory-functions">Factory Functions<a class="hash-link" href="#factory-functions" title="Direct link to heading">​</a></h5><p>Factory functions are an eager way to create an interaction, in that the interaction is created when the factory function is called. The factory function request <strong>must</strong> have metadata indicating that it is creating an interaction. The server <strong>must</strong> execute the server handler for the factory function or reject the request with an <a href="#internal-server-error">internal server error</a>. If the server handler finishes executing successfully, the server <strong>must</strong> send a response to the client containing the response type specified in the IDL (assumed to be <code>void</code> if no response type is specified). Subsequent requests in the interaction <strong>must</strong> contain the interaction ID in their metadata.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="constructors-deprecated">Constructors (Deprecated)<a class="hash-link" href="#constructors-deprecated" title="Direct link to heading">​</a></h5><p>Interaction constructors are a lazy way to create an interaction, in that the interaction is not created until the first request that is part of the interaction is sent. This first request <strong>must</strong> have metadata indicating that it is the first request. Subsequent requests <strong>must</strong> contain the interaction ID in their metadata.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="termination">Termination<a class="hash-link" href="#termination" title="Direct link to heading">​</a></h4><p>Only the client can terminate the interaction and it can do so at any time after the interaction has been created, including with requests outstanding. When an interaction is terminated, the client <strong>must</strong> send a termination signal to the server. The server <strong>must</strong> finish processing any outstanding requests when the termination signal is received, including waiting for streams/sinks to complete normally; terminating an interaction <strong>must not</strong> cancel member streams/sinks. The server <strong>must</strong> invoke the following two hooks:</p><ul><li>onTermination: scheduled immediately when termination signal is received, without waiting for outstanding requests to complete.</li><li>destructor: scheduled once all responses have been sent back to the client and streams/sinks completed.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="serial-interactions">Serial interactions<a class="hash-link" href="#serial-interactions" title="Direct link to heading">​</a></h4><p>For interactions annotated <code>(serial)</code> the server <strong>must</strong> ensure no more than one request is being executed at a time by buffering concurrent requests and executing them sequentially. The client <strong>may</strong> send multiple requests in such an interaction without waiting for responses in between.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oneway-requests-deprecated">Oneway Requests (Deprecated)<a class="hash-link" href="#oneway-requests-deprecated" title="Direct link to heading">​</a></h3><p>To perform a oneway request, the client <strong>must</strong> make a request for a oneway request method defined in the IDL. The request <strong>must</strong> follow the format defined in <a href="#request">Request</a>. The client <strong>must not</strong> wait for a response from the server. The client <strong>should</strong> raise a <a href="#client-detected-exceptions">Client Detected Exception</a> if there is an exception while the client is attempting to send the request. The server <strong>must</strong> execute the server handler for the requested method or drop the request.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timeouts">Timeouts<a class="hash-link" href="#timeouts" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-timeout">Client Timeout<a class="hash-link" href="#client-timeout" title="Direct link to heading">​</a></h3><p>The client <strong>may</strong> specify a timeout value for a request which is the amount of time it is willing to wait for a response from the server before giving up and raising a <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/cpp/transport/TTransportException.h" target="_blank" rel="noopener noreferrer"><code>TTransportException</code></a> with the type <code>TIMEOUT</code>. This timeout value <strong>should</strong> also be sent to the server in the request metadata. If set, the server <strong>should</strong> only start processing the request from the request queue if the client timeout has not already expired. If it has already expired, the server <strong>should</strong> instead drop the request and send an <a href="#internal-server-error">internal server error</a> with the code <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/cpp2/async/ResponseChannel.cpp" target="_blank" rel="noopener noreferrer"><code>kTaskExpiredErrorCode</code></a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="queue-timeout">Queue Timeout<a class="hash-link" href="#queue-timeout" title="Direct link to heading">​</a></h3><p>The client <strong>may</strong> specify a queue timeout value in the request metadata. The queue timeout is the amount of time the server <strong>should</strong> allow the request to sit in its request queue before giving up and dropping the request. If the request sits in the request queue for longer than the queue timeout value, the server <strong>should not</strong> start processing the request and instead send an <a href="#internal-server-error">internal server error</a> with the code <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/cpp2/async/ResponseChannel.cpp" target="_blank" rel="noopener noreferrer"><code>kServerQueueTimeoutErrorCode</code></a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compression">Compression<a class="hash-link" href="#compression" title="Direct link to heading">​</a></h2><p>Request and response compression is supported in Thrift using one of the following algorithms:</p><ul><li>ZLIB</li><li>ZSTD</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-compression">Request Compression<a class="hash-link" href="#request-compression" title="Direct link to heading">​</a></h3><p>Requests <strong>may</strong> be compressed by the client after they have been serialized as described in #Request-serialization. If the request was compressed, the compression algorithm <strong>must</strong> be specified in the request metadata.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="response-compression">Response Compression<a class="hash-link" href="#response-compression" title="Direct link to heading">​</a></h3><p>The client <strong>may</strong> request the server to compress responses based on the size of the response. If requesting compression, the client <strong>should</strong> specify the compression algorithm and the minimum response size that <strong>should</strong> trigger compression in the request metadata. If requested by the client, the server <strong>should</strong> compress the response after it has been serialized using the compression algorithm specified by the client. If not requested by the client, the server <strong>may</strong> compress the response and it <strong>may</strong> use any supported compression algorithm. If the response was compressed, the compression algorithm <strong>must</strong> be specified in the response metadata.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="client-detected-exceptions">Client Detected Exceptions<a class="hash-link" href="#client-detected-exceptions" title="Direct link to heading">​</a></h2><p>Exceptions that are detected purely by the client (rather than being sent over the wire from the server) are represented as <a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/cpp/transport/TTransportException.h" target="_blank" rel="noopener noreferrer"><code>TTransportException</code></a>. Some of the reasons why a client detected exception may be raised include:</p><ul><li>Timeout (server non-responsive)</li><li>Corrupted data (checksum mismatch)</li><li>Socket errors</li><li><a href="https://github.com/facebook/fbthrift/blob/main/thrift/lib/cpp/transport/TTransportException.h#TTransportExceptionType" target="_blank" rel="noopener noreferrer">Many more</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="underlying-transport-protocols">Underlying Transport Protocols<a class="hash-link" href="#underlying-transport-protocols" title="Direct link to heading">​</a></h2><p>The Thrift Interface protocol is a higher level abstraction that defines the behavior of various interfaces, however, it must utilize a lower level transport protocol to actually send requests and receive responses.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rocket-protocol">Rocket Protocol<a class="hash-link" href="#rocket-protocol" title="Direct link to heading">​</a></h3><p><a href="/docs/spec/protocol/interface/rocket">Rocket protocol</a> is an implementation of the Thrift Interface protocol using the <a href="https://rsocket.io/" target="_blank" rel="noopener noreferrer">RSocket protocol</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="header-protocol-deprecated">Header Protocol (Deprecated)<a class="hash-link" href="#header-protocol-deprecated" title="Direct link to heading">​</a></h3><p>Header protocol is a deprecated transport protocol.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/fbthrift/blob/main/thrift/website/../doc/spec/protocol/interface/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/spec/protocol/data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Data Protocols</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/spec/protocol/interface/rocket"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rocket Protocol</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#request" class="table-of-contents__link toc-highlight">Request</a><ul><li><a href="#serialization-details" class="table-of-contents__link toc-highlight">Serialization Details</a></li></ul></li><li><a href="#response" class="table-of-contents__link toc-highlight">Response</a><ul><li><a href="#declared-response-and-declared-exception" class="table-of-contents__link toc-highlight">Declared Response and Declared Exception</a></li><li><a href="#undeclared-exception" class="table-of-contents__link toc-highlight">Undeclared Exception</a></li><li><a href="#any-exception" class="table-of-contents__link toc-highlight">Any Exception</a></li><li><a href="#internal-server-error" class="table-of-contents__link toc-highlight">Internal Server Error</a></li></ul></li><li><a href="#interfaces" class="table-of-contents__link toc-highlight">Interfaces</a><ul><li><a href="#request-response" class="table-of-contents__link toc-highlight">Request-Response</a></li><li><a href="#stream" class="table-of-contents__link toc-highlight">Stream</a></li><li><a href="#sink" class="table-of-contents__link toc-highlight">Sink</a></li><li><a href="#interactions" class="table-of-contents__link toc-highlight">Interactions</a></li><li><a href="#oneway-requests-deprecated" class="table-of-contents__link toc-highlight">Oneway Requests (Deprecated)</a></li></ul></li><li><a href="#timeouts" class="table-of-contents__link toc-highlight">Timeouts</a><ul><li><a href="#client-timeout" class="table-of-contents__link toc-highlight">Client Timeout</a></li><li><a href="#queue-timeout" class="table-of-contents__link toc-highlight">Queue Timeout</a></li></ul></li><li><a href="#compression" class="table-of-contents__link toc-highlight">Compression</a><ul><li><a href="#request-compression" class="table-of-contents__link toc-highlight">Request Compression</a></li><li><a href="#response-compression" class="table-of-contents__link toc-highlight">Response Compression</a></li></ul></li><li><a href="#client-detected-exceptions" class="table-of-contents__link toc-highlight">Client Detected Exceptions</a></li><li><a href="#underlying-transport-protocols" class="table-of-contents__link toc-highlight">Underlying Transport Protocols</a><ul><li><a href="#rocket-protocol" class="table-of-contents__link toc-highlight">Rocket Protocol</a></li><li><a href="#header-protocol-deprecated" class="table-of-contents__link toc-highlight">Header Protocol (Deprecated)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/thrift" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://engineering.fb.com/2014/02/20/open-source/under-the-hood-building-and-open-sourcing-fbthrift/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/fbthrift" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2022 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1abcbc59.js"></script>
<script src="/assets/js/main.b3203846.js"></script>
</body>
</html>